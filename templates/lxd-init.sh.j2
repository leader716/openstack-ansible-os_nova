#!/bin/bash
# {{ ansible_managed }}

# This is a script to configure lxd system settings.
# "/usr/bin/lxd init"

/usr/bin/lxd init \
  --auto \
  --network-address={{ lxd_bind_address }} \
  --network-port={{ lxd_bind_port }} \
  --storage-backend={{ lxd_storage_backend }} \
{% if lxd_storage_pool is defined %}
  --storage-pool={{ lxd_storage_pool }} \
{% endif %}
{% if lxd_storage_device is defined %}
  --storage-create-device={{ lxd_storage_device }}
{% endif %}
  --trust-password={{ lxd_trust_password }}
